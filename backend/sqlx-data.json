{
  "db": "PostgreSQL",
  "01c8c00d585a67871c0d5d26063389a6344a585c2fb286d5dedf0863a038dedb": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "description",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "icon_url",
          "ordinal": 3,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int4"
        ]
      }
    },
    "query": "\n            SELECT id, name, description, icon_url\n            FROM emotions\n            WHERE id = $1\n        "
  },
  "0f5ea20e3ce0ffe2910777bf1ec7fc918bbebb5ceaa3f92d922cdd170cc78a72": {
    "describe": {
      "columns": [
        {
          "name": "emotion_id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "position",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "notes",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Int4",
          "Int4",
          "Text",
          "Text",
          "Int4",
          "Text"
        ]
      }
    },
    "query": "\n            UPDATE review_emotions\n            SET emotion_id  = COALESCE($1, emotion_id),\n                position    = COALESCE($2, position),\n                notes       = COALESCE($3, notes)\n            WHERE review_id = (SELECT id\n                                 FROM users,\n                                      reviews\n                                WHERE slug           = $4\n                                  AND users.user_id  = reviews.user_id\n                                  AND users.username = $6\n                                LIMIT 1\n                               )\n               AND position = $5\n            RETURNING emotion_id,\n                      position, \n                      notes\n        "
  },
  "1a66539537c71a52ffacfe03719f39c0e6b174a6cecccbfba7750371af8cd19d": {
    "describe": {
      "columns": [
        {
          "name": "user_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "password_hash",
          "ordinal": 1,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\n        SELECT user_id, password_hash FROM users\n        WHERE username = $1\n        "
  },
  "1fe24919817ef6e4f49660e030bea264f785ffb356a758a8ab126cbf388766ff": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "medium",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "creator",
          "ordinal": 3,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        null,
        null
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Text",
          "Uuid",
          "Text"
        ]
      }
    },
    "query": " \n        WITH creator as (\n            INSERT INTO creators (id, name)\n            VALUES ($4, $5) ON CONFLICT DO NOTHING\n            RETURNING (\n                    SELECT id\n                    FROM creators\n                    WHERE name = $5\n                    LIMIT 1\n                ) as id\n        )\n        INSERT INTO stories (id, title, medium_id, creator_id)\n        VALUES (\n                $1,\n                $2,\n                (\n                    SELECT id\n                    FROM mediums\n                    WHERE name = $3\n                    LIMIT 1\n                ), (\n                    SELECT id\n                    FROM creator\n                    LIMIT 1\n                )\n            )\n        RETURNING id,\n            title,\n            (\n                SELECT name\n                FROM mediums\n                WHERE id = medium_id\n                LIMIT 1\n            ) as medium,\n            (\n                SELECT name\n                FROM creators\n                WHERE id = creator_id\n                LIMIT 1\n            ) as creator\n        "
  },
  "2c46d9b3160ef9ad68700bb4c6aad60da9de1c0011e9c484acd438f4c18cf32f": {
    "describe": {
      "columns": [
        {
          "name": "user_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "username",
          "ordinal": 1,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n        SELECT user_id, username \n        FROM users\n        WHERE user_id = $1\n        "
  },
  "3f6b86bc5fd6cbbc74917a1e2475522f1d323a79bb2968df23d73072c06c3cf7": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "description",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "icon_url",
          "ordinal": 3,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "\n            SELECT id, name, description, icon_url\n            FROM emotions\n        "
  },
  "55a2a58fcbe135ccec901ab34886a344947135a5824b23c1203a01ef2cc05a57": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n            DELETE FROM reviews\n            WHERE id = $1\n        "
  },
  "55d9cd836996a10ab4f28e94396ee448ac1c22af0f01cb47bcdc26f2a4f9a5ca": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n            DELETE \n              FROM  review_emotions\n             WHERE  review_id = $1\n        "
  },
  "8219707831f28b7fb24d2dc85cdc894c2eb4e7138306a660c536a0b0caa5b1da": {
    "describe": {
      "columns": [
        {
          "name": "user_id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "username",
          "ordinal": 1,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Text"
        ]
      }
    },
    "query": "\n            INSERT INTO users (user_id, username, password_hash)\n            VALUES ($1, $2, $3)\n            RETURNING user_id, username\n        "
  },
  "a9c64f70a0b65beade2022a32505ef6433f811c130cdcfc9171fa9f286efd5b4": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n            DELETE \n              FROM  review_emotions re\n             WHERE  EXISTS (\n                SELECT 1\n                  FROM reviews\n                 WHERE reviews.id      = re.review_id\n                   AND reviews.user_id = $1\n             )\n        "
  },
  "ae329b348a7438717b923d99bc9682df6a4df1fa87127f2f04953ada9f3fa2b3": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "slug",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "body",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "created_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "updated_at",
          "ordinal": 5,
          "type_info": "Timestamptz"
        },
        {
          "name": "user_id",
          "ordinal": 6,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false,
        null,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Text",
          "Timestamptz",
          "Text",
          "Text"
        ]
      }
    },
    "query": "\n        UPDATE reviews\n        SET story_id = COALESCE($1, story_id),\n            slug = COALESCE($2, slug),\n            body = COALESCE($3, body),\n            updated_at = $4\n        WHERE slug = $5\n            AND reviews.user_id = (\n                SELECT user_id\n                FROM users\n                WHERE username = $6\n            )\n        RETURNING id,\n            (\n                select title\n                from stories\n                where id = story_id\n            ),\n            slug,\n            body,\n            created_at,\n            updated_at,\n            user_id\n        "
  },
  "b380e0ae28aa31e8416c01f16e8d69cbb68ff6595591693fc0db686a9d7451d8": {
    "describe": {
      "columns": [
        {
          "name": "emotion_id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "position",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "notes",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Text",
          "Int4",
          "Int4",
          "Text"
        ]
      }
    },
    "query": " \n            INSERT INTO review_emotions(\n                id,\n                review_id,\n                emotion_id,\n                position,\n                notes\n            )\n            VALUES (\n                $1,\n                (\n                    SELECT id\n                      FROM users,\n                           reviews\n                     WHERE slug           = $3\n                       AND users.user_id  = reviews.user_id\n                       AND users.username = $2\n                     LIMIT 1\n                ), \n                $4, \n                $5,\n                $6 \n            )\n            RETURNING emotion_id, position, notes\n        "
  },
  "b776606b59d071b6140eee5ab7e607f15b8814f6478581e23e27fdfe7292c4bf": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "slug",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "body",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "created_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "updated_at",
          "ordinal": 5,
          "type_info": "Timestamptz"
        },
        {
          "name": "user_id",
          "ordinal": 6,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false,
        null,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text",
          "Text",
          "Text",
          "Timestamptz",
          "Timestamptz",
          "Uuid",
          "Uuid"
        ]
      }
    },
    "query": " \n        WITH new_story as (\n            INSERT INTO stories (id, title, medium_id, creator_id)\n            VALUES (\n                    $8,\n                    $2,\n                    (\n                        select id\n                        from mediums\n                        where name = 'Book'\n                    ),\n                    (\n                        select id\n                        from creators\n                        where name = 'Anonymous'\n                    )\n                )\n            RETURNING title\n        )\n        INSERT INTO reviews (\n                id,\n                story_id,\n                slug,\n                body,\n                created_at,\n                updated_at,\n                user_id\n            )\n        VALUES ($1, $8, $3, $4, $5, $6, $7)\n        RETURNING id,\n            (\n                select title\n                from new_story\n            ) as title,\n            slug,\n            body,\n            created_at,\n            updated_at,\n            user_id\n        "
  },
  "c0662261f685d73031942324e240c0ad9ad4cf44debaab977fcc9c865d924f14": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "slug",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "body",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "created_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "updated_at",
          "ordinal": 5,
          "type_info": "Timestamptz"
        },
        {
          "name": "username",
          "ordinal": 6,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      }
    },
    "query": "\n        SELECT reviews.id as id,\n            title,\n            slug,\n            body,\n            created_at,\n            updated_at,\n            username\n        FROM reviews,\n            users,\n            stories\n        WHERE slug = $2\n            AND users.user_id = reviews.user_id\n            AND users.username = $1\n            AND stories.id = reviews.story_id\n        "
  },
  "c410ceada60020f7471e7247a8bcd27ffc3af878ba0558df5b9301d5f4305bf6": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Text",
          "Int4",
          "Text"
        ]
      }
    },
    "query": "\n            DELETE \n              FROM  review_emotions\n             WHERE  review_id = (SELECT id\n                                   FROM users,\n                                        reviews\n                                  WHERE slug           = $1\n                                    AND users.user_id  = reviews.user_id\n                                    AND users.username = $3\n                                  LIMIT 1\n                               )\n                AND position = $2\n        "
  },
  "c99d9e22fcc337ad063d3c6165b47ad0fcd61fb4d319685fc5b4f3c92d4a2a47": {
    "describe": {
      "columns": [
        {
          "name": "user_id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n            SELECT user_id \n            FROM users\n            WHERE user_id = $1\n        "
  },
  "d247e9152c41b8a0995b0ced2484cd99c20237bf544fc0a6f756654899026f2f": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n            DELETE FROM reviews\n            WHERE user_id = $1\n        "
  },
  "da3bc7a336dc1af0be5627257dbbc560a83ca1a9504a83e6285f0f91f7a8c5da": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid",
          "Text"
        ]
      }
    },
    "query": "\n                INSERT INTO stories (id, title, medium_id, creator_id)\n                VALUES (\n                        $1,\n                        $2,\n                        (\n                            select id\n                            from mediums\n                            where name = 'Book'\n                        ),\n                        (\n                            select id\n                            from creators\n                            where name = 'Anonymous'\n                        )\n                    ) ON CONFLICT DO NOTHING\n                RETURNING id\n                "
  },
  "dd81f4650f63031bf532acd0697be75db211f9df6f5dc43f0cccdeadb67b3f3e": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n            DELETE FROM users\n            WHERE       user_id = $1\n        "
  },
  "e2300840ae7a05d77d482000d9727950b3c49454bb824fd518bdffc8629bd336": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "title",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "slug",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "body",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "created_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "updated_at",
          "ordinal": 5,
          "type_info": "Timestamptz"
        },
        {
          "name": "username",
          "ordinal": 6,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8",
          "Uuid"
        ]
      }
    },
    "query": "\n        SELECT reviews.id as id,\n            title,\n            slug,\n            body,\n            created_at,\n            updated_at,\n            username\n        FROM reviews,\n            users,\n            stories\n        WHERE reviews.user_id = COALESCE($3, reviews.user_id)\n            AND reviews.user_id = users.user_id\n            AND stories.id = reviews.story_id\n        ORDER BY updated_at DESC\n        LIMIT $1 OFFSET $2\n        "
  },
  "e424f34fcc9c80469eb9fbb3b067140079256b6ca6b3bc460f9d450284fcac85": {
    "describe": {
      "columns": [
        {
          "name": "emotion_id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "position",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "notes",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Int4"
        ]
      }
    },
    "query": "\n            SELECT emotion_id,\n                   position,\n                   notes\n              FROM users, \n                   reviews,\n                   review_emotions,\n                   emotions\n            WHERE  users.user_id  = reviews.user_id\n              AND  users.username = $1\n              AND  reviews.slug   = $2\n              AND  review_emotions.position = $3\n        "
  },
  "e6d5647507c955bee700916f621707b4bab0563fc7173fd60ebc44941c64cb64": {
    "describe": {
      "columns": [
        {
          "name": "emotion_id",
          "ordinal": 0,
          "type_info": "Int4"
        },
        {
          "name": "position",
          "ordinal": 1,
          "type_info": "Int4"
        },
        {
          "name": "notes",
          "ordinal": 2,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        true
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n            SELECT emotion_id,\n                   position,\n                   notes\n              FROM review_emotions\n            WHERE  review_id = $1\n          ORDER BY position ASC\n        "
  }
}